<!doctype html>
<html lang="es-MX">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <title>Vuelta al C√≥ndor - El Rey de la Monta√±a</title>
  <meta name="description" content="Vuelta al C√≥ndor 2025: 187 km autosuficientes con 3000 m+ del Z√≥calo de CDMX a Okupache C.U. Evento inclusivo, seguro y de alto rendimiento para toda la comunidad ciclista.">
  <meta name="keywords" content="Vuelta al C√≥ndor,ciclismo,ultraciclismo,CDMX,autosuficiente,evento inclusivo,3000 m">
  <meta name="author" content="IzignaMx" />
  <meta name="robots" content="index,follow">
  <meta name="theme-color" content="#0E1F15">
  <meta name="color-scheme" content="dark">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data: blob: https://www.google-analytics.com; style-src-elem 'self' https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self' 'unsafe-eval' 'unsafe-inline' https://www.googletagmanager.com; connect-src 'self' https://www.google-analytics.com https://www.googletagmanager.com;">
  <link rel="canonical" href="/">
  <link rel="manifest" href="site.webmanifest">
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link rel="icon" type="image/png" sizes="96x96" href="favicon-96x96.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin>
  <link rel="preconnect" href="https://www.google-analytics.com" crossorigin>
  <link rel="preconnect" href="https://condor.izignamx.com" crossorigin>
  <link rel="dns-prefetch" href="https://condor.izignamx.com">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <link rel="dns-prefetch" href="https://www.google-analytics.com">
  <link rel="preload" as="style" href="styles.min.css?v=202511080230" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="styles.min.css?v=202511080230"></noscript>
  <link rel="preload" as="image" href="images/valley-2400.avif" type="image/avif" fetchpriority="high">
  <link rel="preload" as="image" href="images/VAC-red-320.avif" imagesrcset="images/VAC-red-320.avif 320w, images/VAC-red-480.avif 480w, images/VAC-red-640.avif 640w, images/VAC-red-960.avif 960w" imagesizes="(max-width: 1024px) 260px, 320px" fetchpriority="high">
  <link rel="preload" as="image" href="images/promo-1200.avif" type="image/avif" imagesrcset="images/promo-800.avif 800w, images/promo-1200.avif 1200w" imagesizes="(max-width: 900px) 800px, 1200px" fetchpriority="low">
  <!--link rel="prefetch" href="/corredores.html"-->
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <!-- CSS cr√≠tico inlined: header y hero para mejorar LCP -->
  <style id="vac-critical">
    :root{
      color-scheme: dark;
      --vac-bg:#0E1F15;--vac-elev:#13271B;--vac-text:#E7EFE9;--vac-muted:#B9C9C1;--vac-gold:#D8A321;--vac-red:#FF3A2E;--vac-green:#0F4D3A;--vac-link:#79B86A;--vac-outline:#FFF;
      --vac-grad-hero: radial-gradient(ellipse at 5% -50%, rgba(216,163,33,0.21) 0%, transparent 60%), linear-gradient(180deg, rgba(14,31,21,0.69) 0%, rgba(14,31,21,0.12) 60%, rgba(14,31,21,0.44) 100%);
      --vac-radius:18px;--vac-border:1px solid rgba(233,255,244,0.08);--vac-shadow-soft:0 14px 32px rgba(14,31,21,0.32)
    }
    body{background: radial-gradient(circle at top, rgba(216,163,33,0.08), transparent 55%), var(--vac-bg); color: var(--vac-text); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica Neue, Arial, sans-serif; margin:0}
    /* Header fijo minimal */
    .site-header{backdrop-filter: blur(18px); background: rgba(14,31,21,0.92); border-bottom: 1px solid rgba(233,255,244,0.08); position: fixed; top:0; width:100%; z-index:900}
    .site-nav{display:flex; align-items:center; justify-content:space-between; gap:1.5rem; max-width:1200px; margin:0 auto; padding:.85rem 1.5rem}
    .brand{display:flex; align-items:center; gap:.75rem; color: var(--vac-text); font-weight:700; letter-spacing:.04em; text-decoration:none}
    .brand img{width:44px; height:44px; border-radius:12px}
    .nav-links{display:flex; align-items:center; gap:1.25rem; list-style:none; margin:0; padding:0}
    .nav-links a{color: var(--vac-muted); font-weight:500; text-decoration:none}
    .nav-links a:hover,.nav-links a:focus-visible{color: var(--vac-gold)}
    .hamburger{display:none}
    @media (max-width: 900px){ .nav-links{display:none} .hamburger{display:flex} }
    /* Hero above-the-fold */
    main{background: var(--vac-bg)}
    #contenido-principal{background-attachment: fixed; background-position: 50%; background-size: cover; padding-top:81px;
      background-image: var(--vac-grad-hero), -webkit-image-set(
        url("images/valley-2400.avif") type("image/avif") 1x,
        url("images/valley-3200.avif") type("image/avif") 2x,
        url("images/valley-2400.webp") type("image/webp") 1x,
        url("images/valley-3200.webp") type("image/webp") 2x,
        url("images/valley.jpg") type("image/jpeg") 1x
      );
      background-image: var(--vac-grad-hero), image-set(
        url("images/valley-2400.avif") type("image/avif") 1x,
        url("images/valley-3200.avif") type("image/avif") 2x,
        url("images/valley-2400.webp") type("image/webp") 1x,
        url("images/valley-3200.webp") type("image/webp") 2x,
        url("images/valley.jpg") type("image/jpeg") 1x
      );
    }
    .hero{border-bottom:1px solid rgba(233,255,244,0.06); padding-top:6rem}
    .hero-inner{display:grid; align-items:flex-start; gap:3rem; grid-template-columns: minmax(0,.42fr) minmax(0,.9fr); max-width:1200px; margin:0 auto; padding:0 1.5rem 2.5rem}
    .hero-media{text-align:center}
    .hero-media img{width:min(320px,80%); height:auto}
    .hero-content{display:grid; gap:1.5rem}
    .hero-content h1{font-size: clamp(3rem, 5vw, 4.2rem); letter-spacing: -.04em; line-height: 1.05; margin:0}
    .hero-subtitle{color: var(--vac-muted); font-size: 1.07rem; margin:0}
    @media (max-width:1024px){ .hero-inner{grid-template-columns:1fr; text-align:center} .hero-content{align-items:center} }
  </style>
  <style>
    /* Bot√≥n flotante de Feedback: discreto, accesible y no invasivo */
    #feedback-floating {
      position: fixed;
      left: 16px;
      bottom: 16px;
      z-index: 20;
      display: none;
      padding: 10px 12px;
      border-radius: 24px;
      box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    }
    @media (max-width: 900px){
      #feedback-floating { left: 12px; bottom: 12px; }
    }
  </style>
  <!-- Estado activo para enlaces internos: resalta cuando la secci√≥n est√° visible -->
  <style>
    .nav-links a[aria-current="location"] { color: var(--vac-gold); position: relative; }
    .nav-links a[aria-current="location"]::after {
      content: ''; position: absolute; left: 0; bottom: -.5rem; width: 100%; height: 2px;
      background: var(--vac-gold); border-radius: 999px;
    }
  </style>
  <meta property="og:title" content="Vuelta al C√≥ndor 2025 ¬∑ 187 km autosuficientes">
  <meta property="og:description" content="Sube 3000 m+ desde el Z√≥calo hasta Okupache C.U. con un evento inclusivo y seguro.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="/">
  <meta property="og:image" content="/images/promo.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:site_name" content="Vuelta al C√≥ndor">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Vuelta al C√≥ndor 2025 ¬∑ 187 km autosuficientes">
  <meta name="twitter:description" content="Evento inclusivo que apoya a la comunidad LGBTQI+. 29 de noviembre 2025 ¬∑ 06:00AM ¬∑ Z√≥calo CDMX.">
  <meta name="twitter:image" content="/images/promo.jpg">
  <meta name="twitter:site" content="@el.rey.de.la.montana">
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "SportsEvent",
    "name": "Vuelta al C√≥ndor 2025",
    "description": "Carrera de ciclismo de ruta autosuficiente de 187 km y 3000 m de desnivel acumulado. Evento inclusivo y seguro para todas las personas.",
    "startDate": "2025-11-29T06:00:00-06:00",
    "endDate": "2025-11-29T20:00:00-06:00",
    "eventStatus": "https://schema.org/EventScheduled",
    "eventAttendanceMode": "https://schema.org/OfflineEventAttendanceMode",
    "inLanguage": "es-MX",
    "url": "/",
    "image": [
      "/images/VAC.png",
      "/images/promo.jpg",
      "/images/VAC-ruta-labeled.png",
      "/images/VAC-altimetria-labeled.png"
    ],
    "location": {
      "@type": "Place",
      "name": "Z√≥calo de la Ciudad de M√©xico",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Plaza de la Constituci√≥n",
        "addressLocality": "Ciudad de M√©xico",
        "addressRegion": "CDMX",
        "postalCode": "06000",
        "addressCountry": "MX"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": "19.4326",
        "longitude": "-99.1332"
      }
    },
    "organizer": {
      "@type": "Organization",
      "name": "El Rey de la Monta√±a",
      "url": "https://www.instagram.com/el.rey.de.la.montana",
      "sameAs": [
        "https://www.instagram.com/el.rey.de.la.montana"
      ]
    },
    "sport": "Cycling",
    "offers": {
      "@type": "Offer",
      "price": "280",
      "priceCurrency": "MXN",
      "availability": "https://schema.org/InStock",
      "description": "Inscripci√≥n √∫nica por persona. Categor√≠as femenil y varonil."
    },
    "subEvent": [
      {
        "@type": "Event",
        "name": "La Loma",
        "startDate": "2025-11-29T08:10:00-06:00",
        "location": {
          "@type": "Place",
          "name": "La Loma",
          "address": "Kil√≥metro 50 ¬∑ Valle de M√©xico"
        }
      },
      {
        "@type": "Event",
        "name": "Ca√±√≥n de Lobos",
        "startDate": "2025-11-29T10:40:00-06:00",
        "location": {
          "@type": "Place",
          "name": "Ca√±√≥n de Lobos",
          "address": "Kil√≥metro 110 ¬∑ Estado de M√©xico"
        }
      },
      {
        "@type": "Event",
        "name": "Tres Mar√≠as",
        "startDate": "2025-11-29T13:30:00-06:00",
        "location": {
          "@type": "Place",
          "name": "Tres Mar√≠as",
          "address": "Kil√≥metro 145 ¬∑ Morelos"
        }
      },
      {
        "@type": "Event",
        "name": "Okupache C.U. ¬∑ Meta",
        "startDate": "2025-11-29T18:30:00-06:00",
        "location": {
          "@type": "Place",
          "name": "Okupache C.U.",
          "address": "Kil√≥metro 187 ¬∑ Ciudad Universitaria, CDMX"
        }
      }
    ]
  }
  </script>
  
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "Vuelta al C√≥ndor",
    "url": "/",
    "inLanguage": "es-MX",
    "description": "Sitio oficial de la Vuelta al C√≥ndor 2025, ultraciclismo autosuficiente e inclusivo desde el Z√≥calo de CDMX.",
    "publisher": {
      "@type": "Organization",
      "name": "El Rey de la Monta√±a",
      "url": "https://www.instagram.com/el.rey.de.la.montana"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "/?q={search_term_string}"
      },
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {"@type": "ListItem", "position": 1, "name": "Inicio", "item": "/"},
      {"@type": "ListItem", "position": 2, "name": "Detalles", "item": "/#detalles"},
      {"@type": "ListItem", "position": 3, "name": "Ruta", "item": "/#ruta"},
      {"@type": "ListItem", "position": 4, "name": "Patrocinadores", "item": "/#patrocinadores"},
      {"@type": "ListItem", "position": 5, "name": "Contacto", "item": "/#contacto"}
    ]
  }
  </script>
  
  <!-- Transient console silencer to suppress third‚Äëparty verbose logs during initial load. -->
  <script>
    (function() {
      var c = window.console || {};
      // Save originals and mute non-error channels (keep warn/error intact)
      var original = {
        log: c.log,
        info: c.info,
        debug: c.debug,
        trace: c.trace,
        group: c.group,
        groupCollapsed: c.groupCollapsed,
        groupEnd: c.groupEnd
      };
      var noop = function(){};
      c.log = c.info = c.debug = c.trace = noop;
      c.group = c.groupCollapsed = c.groupEnd = noop;
      // Expose for later restoration after load
      window.__consoleOriginal = original;
    })();
  </script>
  <!-- Estilos para el banner del evento, overlay de fuegos artificiales y bot√≥n de rendimiento -->
  <style>
    .fireworks-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 50;
      display: none;
    }
    .event-banner {
      display: none;
      margin: 0.75rem 0 1rem 0;
      padding: 0.75rem 1rem;
      border: 1px solid var(--vac-accent, #51e9f0);
      border-radius: 8px;
      background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));
      color: var(--vac-text, #ffffff);
      font-weight: 600;
      letter-spacing: 0.2px;
    }
    .event-banner.motivation { border-color: var(--vac-accent, #51e9f0); }
    .event-banner.thanks { border-color: #9ef59f; }

    /* Bot√≥n de rendimiento como toggle deslizante con emoji ‚ö° */
    .perf-toggle.button.secondary {
      position: relative;
      width: 64px;
      height: 32px;
      min-width: 64px;
      padding: 0;
      border-radius: 999px;
      display: inline-block;
      border: 1px solid rgba(81, 233, 240, 0.65);
      background: linear-gradient(180deg, rgba(0,0,0,0.25), rgba(0,0,0,0.12));
      overflow: hidden;
      transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease;
    }
    .perf-toggle .toggle-track {
      position: absolute; inset: 0; border-radius: inherit;
      background: radial-gradient(120% 120% at 0% 50%, rgba(81,233,240,0.12), rgba(0,0,0,0));
      display: flex; align-items: center; justify-content: space-between;
      padding: 0 8px; font-size: 10px; font-weight: 600; letter-spacing: 0.5px;
      color: rgba(207,239,241,0.45);
      transition: background .25s ease, color .25s ease;
    }
    .perf-toggle .toggle-text { opacity: 0.55; transition: opacity .2s ease, color .2s ease; }
    .perf-toggle:not([aria-pressed="true"]) .toggle-text.off { opacity: 0.95; color: #cfeff1; }
    .perf-toggle:not([aria-pressed="true"]) .toggle-text.on { opacity: 0.25; color: rgba(207,239,241,0.35); }
    .perf-toggle .toggle-knob {
      position: absolute; top: 2px; left: 2px;
      width: 28px; height: 28px; border-radius: 50%;
      display: grid; place-items: center;
      background: rgba(14, 31, 21, 0.75);
      color: #cfeff1; font-size: 18px; line-height: 1;
      box-shadow: 0 0 0 0 rgba(81,233,240,0.0);
      transform: translateX(0);
      transition: transform .18s ease, background .18s ease, color .18s ease, box-shadow .18s ease;
    }
    .perf-toggle:focus-visible { outline: none; box-shadow: 0 0 0 2px rgba(81,233,240,0.6); }
    .perf-toggle[aria-pressed="true"] { border-color: #35d399; }
    .perf-toggle[aria-pressed="true"] .toggle-track {
      background: radial-gradient(120% 120% at 100% 50%, rgba(53,211,153,0.20), rgba(0,0,0,0));
    }
    .perf-toggle[aria-pressed="true"] .toggle-text.on { opacity: 0.95; color: #9ef59f; }
    .perf-toggle[aria-pressed="true"] .toggle-text.off { opacity: 0.25; color: rgba(207,239,241,0.35); }
    .perf-toggle[aria-pressed="true"] .toggle-knob {
      transform: translateX(32px);
      background: rgba(53, 211, 153, 0.25);
      color: #9ef59f;
      box-shadow: 0 0 8px 2px rgba(53,211,153,0.25);
    }
    /* Secci√≥n promocional de la Gu√≠a en el home */
    .guide-promo {
      margin: 1.25rem auto 1.5rem;
    }
    .promo-grid {
      display: grid;
      gap: 16px;
      grid-template-columns: repeat(2, minmax(0, 1fr));
    }
    .promo-card {
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 10px;
      padding: 16px;
      background: linear-gradient(180deg, rgba(0,0,0,0.55), rgba(0,0,0,0.35));
    }
    .promo-card h3 { margin: 0 0 .5rem 0; color: var(--vac-text); }
    .promo-card p { margin: 0 0 .5rem 0; color: var(--vac-muted); }
    .promo-card ul { margin: 0; padding-left: 1rem; color: var(--vac-text); }
    @media (max-width: 900px){ .promo-grid { grid-template-columns: 1fr; } }
  </style>
  <!-- Google Analytics: carga en idle, respetando DNT y Save-Data -->
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    function vacDNTEnabled(){
      try {
        var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack || '').toString().toLowerCase();
        return dnt === '1' || dnt === 'yes' || dnt === 'true';
      } catch(_) { return false; }
    }
    function vacSaveData(){
      try { return !!(navigator.connection && navigator.connection.saveData); } catch(_) { return false; }
    }
    function vacLoadGA(){
      var script = document.createElement('script');
      script.src = 'https://www.googletagmanager.com/gtag/js?id=G-132SN84E79';
      script.async = true;
      document.head.appendChild(script);
      gtag('js', new Date());
      gtag('config', 'G-132SN84E79', { anonymize_ip: true, transport_type: 'beacon' });
    }
    window.addEventListener('load', function(){
      if (vacDNTEnabled() || vacSaveData()) return;
      var ric = window.requestIdleCallback || function(fn){ setTimeout(fn, 2500); };
      ric(vacLoadGA);
    });
  </script>
</head>
<body id="inicio">
  <a class="skip-link" href="#contenido-principal">Saltar al contenido principal</a>
  <header class="site-header">
    <nav class="site-nav" aria-label="Navegaci√≥n principal">
      <a class="brand" href="#inicio">
        <picture>
          <source type="image/avif" srcset="images/VAC-44.avif 44w, images/VAC-88.avif 88w, images/VAC-132.avif 132w" sizes="44px">
          <source type="image/webp" srcset="images/VAC-44.webp 44w, images/VAC-88.webp 88w, images/VAC-132.webp 132w" sizes="44px">
          <img src="images/VAC.png" alt="Logotipo de la Vuelta al C√≥ndor" decoding="async" fetchpriority="high" width="1263" height="1264">
        </picture>
        <span>Vuelta al C√≥ndor</span>
      </a>
      <button class="hamburger" type="button" aria-controls="mobile-nav" aria-expanded="false" aria-label="Abrir men√∫ de navegaci√≥n">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul class="nav-links">
        <li><a href="#detalles">Detalles</a></li>
        <li><a href="#ruta">Ruta</a></li>
        <li><a href="#altimetria">Altimetr√≠a</a></li>
        <li><a href="#guia-promo">Gu√≠a</a></li>
        <li><a href="#patrocinadores">Patrocinadores</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#reglamento">Reglamento</a></li>
        <li><a href="#contacto">Contacto</a></li>
        <!--li><a href="/corredores.html">Corredores</a></li-->
      </ul>
      <button class="button secondary perf-toggle" type="button" aria-pressed="false" aria-label="Activar modo rendimiento (reducir animaciones)" title="Activar modo rendimiento">
        <span class="toggle-track" aria-hidden="true">
          <span class="toggle-text off" aria-hidden="true">NO</span>
          <span class="toggle-text on" aria-hidden="true">S√ç</span>
        </span>
        <span class="toggle-knob" aria-hidden="true">‚ö°</span>
      </button>
    </nav>
    <div class="mobile-nav" id="mobile-nav" hidden>
      <ul>
        <li><a href="#detalles">Detalles</a></li>
        <li><a href="#ruta">Ruta</a></li>
        <li><a href="#altimetria">Altimetr√≠a</a></li>
        <li><a href="#patrocinadores">Patrocinadores</a></li>
        <li><a href="#faq">FAQ</a></li>
        <li><a href="#reglamento">Reglamento</a></li>
        <li><a href="#contacto">Contacto</a></li>
        <li><a href="guia.html">Gu√≠a</a></li>
        <!--li><a href="/corredores.html">Corredores</a></li-->
      </ul>
    </div>
  </header>

  <canvas id="fluid-bg" class="fluid-canvas" aria-hidden="true"></canvas>
  <canvas id="fireworks-canvas" class="fireworks-canvas" aria-hidden="true"></canvas>
  <main id="contenido-principal">
    <section class="hero" id="hero" aria-labelledby="hero-title">
      <div class="hero-inner">
        <div class="hero-media">
          <picture>
            <source type="image/avif" srcset="images/VAC-red-320.avif 320w, images/VAC-red-480.avif 480w, images/VAC-red-640.avif 640w, images/VAC-red-960.avif 960w" sizes="(max-width: 1024px) 260px, 320px">
            <source type="image/webp" srcset="images/VAC-red-320.webp 320w, images/VAC-red-480.webp 480w, images/VAC-red-640.webp 640w, images/VAC-red-960.webp 960w" sizes="(max-width: 1024px) 260px, 320px">
            <img src="images/VAC-red.png" alt="Emblema de la Vuelta al C√≥ndor 2025" loading="eager" fetchpriority="high" decoding="async" width="1263" height="1264">
          </picture>
        </div>
        <div class="hero-content">
          <p class="inclusive-badge">
            Evento inclusivo üè≥Ô∏è‚Äçüåà
          </p>
          <h1 id="hero-title">Vuelta al C√≥ndor 2025</h1>
          <p class="hero-subtitle">187 km ¬∑ 3000 m+ ¬∑ 29 de noviembre 2025 ¬∑ 06:00AM ¬∑ Z√≥calo CDMX ‚Üí Okupache C.U.</p>
          <div id="event-banner" class="event-banner" role="status" aria-live="polite" hidden></div>
          <ul class="hero-values">
            <li><span>1</span>Autosuficiencia total sin caravanas motorizadas ni drafting externo.</li>
            <li><span>2</span>Protocolos de seguridad, control de luces y acompa√±amiento comunitario certificados.</li>
            <li><span>3</span>Meta festiva e inclusiva con espacios seguros para todxs en Okupache C.U.</li>
          </ul>
          <div class="hero-stats">
            <div class="stat-card">
              <span>187 km</span>
              <small>Distancia total autosuficiente</small>
            </div>
            <div class="stat-card">
              <span>3000 m+</span>
              <small>Desnivel acumulado</small>
            </div>
            <div class="stat-card">
              <span>$280 MXN</span>
              <small>Inscripci√≥n √∫nica ¬∑ Cupo limitado</small>
            </div>
            <div class="stat-card">
              <span>2 categor√≠as</span>
              <small>Femenil y varonil</small>
            </div>
          </div>
          <div class="hero-cta">
            <a class="button primary" href="route/vac.gpx" download>üìç Descargar GPX</a>
            <a class="button secondary" href="#reglamento">Ver reglamento</a>
            <a class="button secondary" href="guia.html">Ver gu√≠a</a>
          </div>
          <div id="countdown" class="countdown" aria-live="polite">
            <div class="countdown-item">
              <span class="countdown-value" id="countdown-days">00</span>
              <span>D√≠as</span>
            </div>
            <div class="countdown-item">
              <span class="countdown-value" id="countdown-hours">00</span>
              <span>Horas</span>
            </div>
            <div class="countdown-item">
              <span class="countdown-value" id="countdown-minutes">00</span>
              <span>Minutos</span>
            </div>
            <div class="countdown-item">
              <span class="countdown-value" id="countdown-seconds">00</span>
              <span>Segundos</span>
            </div>
          </div>
          <div class="hero-message">
            <ul>
              <li>Promovemos la inclusi√≥n, el respeto y la diversidad en cada rodada.</li>
              <li>Apoyamos abiertamente a la comunidad LGBTQI+ con protocolos de cuidado mutuo.</li>
              <li>Garantizamos que el deporte y la participaci√≥n comunitaria sean accesibles para todxs.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="section" id="detalles" aria-labelledby="detalles-title">
      <div class="section-header">
        <h2 id="detalles-title">Detalles del evento</h2>
        <p>Una ruta autosuficiente que cruza los cerros del Valle de M√©xico con protocolos de seguridad y acompa√±amiento comunitario en cada segmento.</p>
      </div>
      <div class="details-grid">
        <article class="detail-card">
          <h3>Salida</h3>
          <span>29 de noviembre 2025 ¬∑ 06:00</span>
          <p>Z√≥calo de la Ciudad de M√©xico. Check-in nocturno con control de luces y equipamiento obligatorio.</p>
        </article>
        <article class="detail-card">
          <h3>Meta</h3>
          <span>Okupache C.U. ¬∑ Km 187</span>
          <p>Llegada celebratoria en Ciudad Universitaria con hidrataci√≥n, zona de recuperaci√≥n y se√±alizaci√≥n t√°ctica.</p>
        </article>
        <article class="detail-card">
          <h3>Formato autosuficiente</h3>
          <p>Sin caravanas motorizadas ni apoyo externo. Cada persona gestiona alimentaci√≥n, reparaciones y log√≠stica en la ruta marcada.</p>
        </article>
        <article class="detail-card">
          <h3>Segmentos clave</h3>
          <p>La Loma (km 50),<br>Ca√±√≥n de Lobos (km 110),<br>Tres Mar√≠as (km 145) y<br>Okupache C.U. (km 187).</p>
        </article>
      </div>
    </section>

    <section class="section" id="ruta" aria-labelledby="ruta-title">
      <div class="section-header">
        <h2 id="ruta-title">Ruta y puertos</h2>
        <p>Planifica tu estrategia con los principales puertos y momentos de control. Todas las altitudes se validaron con track GPX calibrado.</p>
      </div>
      <div class="route-timeline">
        <article class="route-item">
          <h3>Z√≥calo CDMX ¬∑ Salida</h3>
          <span>Km 0 ¬∑ 06:00</span>
          <p>Evento inclusiva, briefing final y control de luces, reflectantes y plan de emergencia personal.</p>
        </article>
        <article class="route-item">
          <h3>La Loma</h3>
          <span>Km 50 ¬∑ 1 100 msnm</span>
          <p>Primer puerto sostenido. Ajusta presiones, abastecimiento de agua y verifica tu ropa t√©rmica antes del bosque.</p>
        </article>
        <article class="route-item">
          <h3>Ca√±√≥n de Lobos</h3>
          <span>Km 110 ¬∑ 1 750 msnm</span>
          <p>Llegada en descenso t√©cnico seguido de rampas cortas. En seguida comienza el ascenso corto, con probablemente las temperaturas mas altas en toda la ruta. Brigadas comunitarias y se√±alizaci√≥n fotoluminiscente activa.</p>
        </article>
        <article class="route-item">
          <h3>Tres Mar√≠as</h3>
          <span>Km 145 ¬∑ 2 300 msnm</span>
          <p>Puerto ic√≥nico con clima variable. Usa capa t√©rmica, luces de alta visibilidad y monitoriza tu nutrici√≥n.</p>
        </article>
        <article class="route-item">
          <h3>Okupache C.U. ¬∑ Meta</h3>
          <span>Km 187 ¬∑ 06:00-20:00</span>
          <p>Recepci√≥n con comunidad ciclista, actividades culturales y evento de clausura libre de discriminaci√≥n.</p>
        </article>
      </div>
      <figure class="route-map">
        <img src="images/VAC-ruta-labeled.png" alt="Mapa ilustrado de la Vuelta al C√≥ndor 2025 con los puertos La Loma, Ca√±√≥n de Lobos, Tres Mar√≠as y la meta en Okupache C.U." loading="lazy" decoding="async" width="1200" height="720">
        <figcaption>La ruta recorre carreteras federales y caminos locales se√±alizados. Respeta cruces urbanos y mantente visible en todo momento.</figcaption>
      </figure>
    </section>

    <section class="section" id="altimetria" aria-labelledby="altimetria-title">
      <div class="section-header">
        <h2 id="altimetria-title">Altimetr√≠a y perfil</h2>
        <p>Visualiza el ascenso acumulado y define tus zonas de potencia antes de salir. El gr√°fico est√° optimizado para lectores de pantalla.</p>
      </div>
      <div class="altimetry-card">
        <figure>
          <img src="images/VAC-altimetria-labeled.png" alt="Perfil altim√©trico de la Vuelta al C√≥ndor con 187 km y 3000 m+. Se destacan La Loma, Ca√±√≥n de Lobos, Tres Mar√≠as y la meta en Okupache C.U." loading="lazy" decoding="async" width="1200" height="420">
          <figcaption>Perfil verificado con datos GPS y ajustes de bar√≥metro. Asegura luces, capa t√©rmica y estrategia de nutrici√≥n acorde.</figcaption>
        </figure>
      </div>
    </section>

    <section class="section" id="gpx" aria-labelledby="gpx-title">
      <div class="section-header">
        <h2 id="gpx-title">Track oficial GPX</h2>
        <p>Descarga el track certificado. No se permiten atajos ni rodadas fuera de ruta.</p>
      </div>
      <div class="gpx-card">
        <p>El archivo <strong>vac.gpx</strong> fue validado en Strava y Garmin Connect. Incluye puntos de control, zonas de abastecimiento sugeridas y alertas de seguridad.</p>
        <ul>
          <li>No salirse de la ruta marcada. Cualquier recorte implica descalificaci√≥n.</li>
          <li>Sincroniza el track con tu dispositivo al menos 24 horas antes para evitar problemas de carga.</li>
          <li>Guarda una copia offline y respalda en tu celular en caso de fallas de navegaci√≥n.</li>
        </ul>
        <a class="button primary" href="route/vac.gpx" download>‚¨áÔ∏è Guardar track VAC 2025</a>
      </div>
    </section>

    <section class="section" id="preparacion" aria-labelledby="preparacion-title">
      <div class="section-header">
        <h2 id="preparacion-title">Preparaci√≥n y seguridad recomendada</h2>
        <p>Checklist sugerido para llegar en √≥ptimas condiciones y cumplir los est√°ndares de seguridad y accesibilidad.</p>
      </div>
      <div class="details-grid">
        <article class="detail-card">
          <h3>Visibilidad permanente</h3>
          <p>Instala luces delantera y trasera con m√≠nimo 8 horas de autonom√≠a, chaleco reflectante y cintas en horquilla y bielas.</p>
        </article>
        <article class="detail-card">
          <h3>Plan de nutrici√≥n</h3>
          <p>Organiza raciones cada 45 minutos, combina hidratos y sales, y respeta los puntos comunitarios de abastecimiento.</p>
        </article>
        <article class="detail-card">
          <h3>Comunicaci√≥n segura</h3>
          <p>Configura n√∫mero de emergencia, comparte tu ubicaci√≥n con contactos de confianza y guarda nuestra l√≠nea directa en WhatsApp.</p>
        </article>
      </div>
    </section>

    <section class="section guide-promo" id="guia-promo" aria-labelledby="guia-promo-title">
      <div class="section-header">
        <h2 id="guia-promo-title">Gu√≠a de entrenamiento y nutrici√≥n</h2>
        <p>Plan expr√©s de 21 d√≠as y estrategia autosuficiente de hidrataci√≥n y alimentaci√≥n para completar los 187 km y 3000 m+.</p>
      </div>
      <div class="promo-grid">
        <article class="promo-card">
          <h3>Plan expr√©s (21 d√≠as)</h3>
          <p>Bloques de consolidaci√≥n y taper con est√≠mulos espec√≠ficos.</p>
          <ul>
            <li>3‚Äì5 sesiones/semana con calidad controlada</li>
            <li>√öltima tirada larga simulando equipo</li>
            <li>Ritmo por sensaciones en puertos</li>
          </ul>
        </article>
        <article class="promo-card">
          <h3>Nutrici√≥n e hidrataci√≥n</h3>
          <p>Objetivos por hora y por segmento ajustados a tu perfil.</p>
          <ul>
            <li>60‚Äì90 g carbohidratos/h</li>
            <li>300‚Äì600 mg sodio/h</li>
            <li>500‚Äì750 ml l√≠quidos/h seg√∫n clima</li>
          </ul>
        </article>
      </div>
      <div class="hero-cta" style="margin-top: 0.75rem">
        <a class="button primary" href="guia.html">Ir a la Gu√≠a</a>
        <a class="button secondary" href="guia.html#herramienta">Calcular estrategia personal</a>
      </div>
    </section>

    <section class="section" id="patrocinadores" aria-labelledby="patrocinadores-title" data-sponsors>
      <div class="section-header">
        <h2 id="patrocinadores-title">Patrocinadores y aliados</h2>
        <p>Gracias a las marcas y proyectos que sostienen la log√≠stica, la seguridad y los espacios comunitarios de este desaf√≠o.</p>
      </div>
      <div class="sponsor-grid" data-sponsors-grid aria-live="polite">
        <p class="visually-hidden">Los logotipos se cargar√°n autom√°ticamente cuando esta secci√≥n sea visible.</p>
      </div>
      <p style="margin-top: 1.5rem; color: var(--vac-muted);">¬øQuieres sumar tu marca? Escr√≠benos para integrar iniciativas responsables y libres de discriminaci√≥n.</p>
    </section>

    <section class="section" id="faq" aria-labelledby="faq-title">
      <div class="section-header">
        <h2 id="faq-title">Preguntas frecuentes</h2>
        <p>Consulta las respuestas antes de rodar. Si tienes otra duda escr√≠benos, estamos para ayudarte.</p>
      </div>
      <div class="faq-list">
        <details class="faq-item">
          <summary>¬øQu√© incluye la inscripci√≥n?</summary>
          <div>
            <p>N√∫mero oficial, buff del evento, comida, rastreo de progreso, acceso a puntos de control con primeros auxilios, cobertura fotogr√°fica y acompa√±amiento. El kit se entrega el 29 de noviembre a partir de las 05:00.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary>¬øC√≥mo garantizamos un espacio inclusivo?</summary>
          <div>
            <p>Todo el staff est√° capacitado en protocolos de respeto, lenguaje inclusivo y atenci√≥n a emergencias psicol√≥gicas. Contamos con un canal seguro para reportar cualquier situaci√≥n de violencia o discriminaci√≥n.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary>¬øCu√°l es el equipo obligatorio?</summary>
          <div>
            <p>Casco certificado, luces delantera/trasera con carga extra, ropa t√©rmica o diferentes capas de ropa, kit b√°sico de reparaci√≥n y dispositivo m√≥vil con bater√≠a externa.</p>
          </div>
        </details>
        <details class="faq-item">
          <summary>¬øPuedo recibir apoyo externo?</summary>
          <div>
            <p>No. La Vuelta al C√≥ndor es autosuficiente. √önicamente se permiten compras en comercios abiertos al p√∫blico y asistencia entre participantes sin veh√≠culos motorizados.</p>
          </div>
        </details>
      </div>
    </section>

    <section class="section" id="reglamento" aria-labelledby="reglamento-title">
      <div class="section-header">
        <h2 id="reglamento-title">Reglamento oficial</h2>
        <p>Estas reglas garantizan un evento seguro, justo e inclusivo. Debes aceptarlas al concluir tu registro.</p>
      </div>
      <ul class="reglamento-list">
        <li>Respetar la ruta oficial sin recortes ni traslados motorizados.</li>
        <li>Portar casco, luces activas, reflectantes y equipo obligatorio durante todo el evento.</li>
        <li>No tirar basura. Lleva bolsa personal y utiliza los puntos de acopio comunitario.</li>
        <li>Registrar cada paso de control en los checkpoints designados.</li>
        <li>Reportar cualquier incidente de movilidad o salud al staff inmediatamente.</li>
        <li>Evitar actitudes discriminatorias. Cero tolerancia a violencia verbal, f√≠sica o simb√≥lica.</li>
        <li>Dar prioridad a peatones y tr√°fico local. Respeta reglamentos viales y se√±alizaciones.</li>
        <li>Aceptar ajustes clim√°ticos o de ruta comunicados por la organizaci√≥n.</li>
      </ul>
    </section>

    <section class="section" id="contacto" aria-labelledby="contacto-title">
      <div class="section-header">
        <h2 id="contacto-title">Contacto y comunidad</h2>
        <p>Estamos disponibles para dudas log√≠sticas, accesibilidad o alianzas. Tambi√©n puedes compartir ideas para m√°s espacios seguros en el ciclismo.</p>
      </div>
      <div class="contact-card">
        <div class="contact-options">
          <a class="button primary" href="https://wa.me/529429003932" target="_blank" rel="noopener">üí¨ WhatsApp Bane ¬∑ +52 492 900 3932</a>
          <a class="button secondary" href="https://wa.me/5215561913650" target="_blank" rel="noopener">üí¨ WhatsApp Dinno ¬∑ +52 1 55 6191 3650</a>
        </div>
        <div class="social-links">
          <a class="button secondary" href="https://www.instagram.com/el.rey.de.la.montana" target="_blank" rel="noopener">üì∏ Instagram @el.rey.de.la.montana</a>
        </div>
        <p style="font-size:1rem;margin: 0; color: var(--vac-muted);">Si necesitas adaptaciones adicionales (lengua de se√±as, apoyo psicol√≥gico, accesibilidad motriz) escr√≠benos y coordinamos contigo.</p>
      </div>
      <img src="/rey-de-la-montana.svg" alt="Logotipo de El Rey de la Monta√±a" width="150" height="48" loading="lazy" decoding="async" class="rey">
    </section>
  </main>

  <footer class="footer" role="contentinfo">
    <div>
      <p>¬© 2025 Vuelta al C√≥ndor ¬∑ El Rey de la Monta√±a. Comunidad ciclista abierta, diversa y segura.</p>
    </div>
    <small class="signature">Landing construida por <a href="https://izignamx.com" target="_blank"><strong>IzignaMx</strong></a></small>
  </footer>

  <script>
    const navToggle = document.querySelector('.hamburger');
    const perfToggle = document.querySelector('.perf-toggle');
    const mobileNav = document.getElementById('mobile-nav');
    const focusSelectors = 'a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])';
    let focusTrap = null;

    function openNav() {
      if (!navToggle || !mobileNav) return;
      navToggle.setAttribute('aria-expanded', 'true');
      mobileNav.hidden = false;
      mobileNav.classList.add('open');
      const focusables = mobileNav.querySelectorAll(focusSelectors);
      if (focusables.length > 0) {
        focusTrap = { first: focusables[0], last: focusables[focusables.length - 1] };
        focusTrap.first.focus();
      }
      document.body.style.overflow = 'hidden';
    }

    function closeNav() {
      if (!navToggle || !mobileNav) return;
      navToggle.setAttribute('aria-expanded', 'false');
      mobileNav.classList.remove('open');
      mobileNav.hidden = true;
      focusTrap = null;
      document.body.style.overflow = '';
      navToggle.focus();
    }

    if (navToggle && mobileNav) {
      navToggle.addEventListener('click', () => {
        const expanded = navToggle.getAttribute('aria-expanded') === 'true';
        expanded ? closeNav() : openNav();
      });

      mobileNav.addEventListener('click', event => {
        if (event.target instanceof HTMLAnchorElement) {
          closeNav();
        }
      });

      document.addEventListener('keydown', event => {
        if (event.key === 'Escape' && mobileNav.classList.contains('open')) {
          closeNav();
          return;
        }
        if (event.key === 'Tab' && mobileNav.classList.contains('open') && focusTrap) {
          const { first, last } = focusTrap;
          if (!first || !last) return;
          if (event.shiftKey && document.activeElement === first) {
            event.preventDefault();
            last.focus();
          } else if (!event.shiftKey && document.activeElement === last) {
            event.preventDefault();
            first.focus();
          }
        }
      });
    }

    const countdownTarget = new Date('2025-11-29T06:00:00-06:00').getTime();
    // Ventanas de estado del evento
    const eventStartMs = countdownTarget; // cuando termina el contador
    const eventEndMs = new Date('2025-11-29T20:00:00-06:00').getTime(); // fin del d√≠a de competencia
    const thanksSwitchMs = eventStartMs + (20 * 60 * 60 * 1000); // 20h despu√©s del fin del contador

    // Elementos UI
    const fireworksCanvas = document.getElementById('fireworks-canvas');
    const eventBanner = document.getElementById('event-banner');
    let perfMode = false;

    function applyPerfMode(on) {
      perfMode = !!on;
      try {
        localStorage.setItem('vac_perf_mode', perfMode ? 'on' : 'off');
      } catch(_) {}
      if (perfToggle) perfToggle.setAttribute('aria-pressed', String(perfMode));
      if (perfToggle) {
        const onTitle = 'Modo rendimiento activado: reducir animaciones y uso de GPU';
        const offTitle = 'Modo rendimiento desactivado: apariencia completa';
        perfToggle.title = perfMode ? onTitle : offTitle;
        perfToggle.setAttribute('aria-label', perfMode ? onTitle : offTitle);
      }
      // Fluid background: bajar calidad o reanudar calidad normal
      if (window.FluidBG && typeof window.FluidBG.setQualityPreset === 'function') {
        const reduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const preset = perfMode ? 'minimal' : (reduced ? 'minimal' : 'high');
        window.FluidBG.setQualityPreset(preset);
        if (perfMode && window.FluidBG.isRunning && window.FluidBG.isRunning()) {
          // Mantener animaci√≥n pero en calidad m√≠nima; no pausamos para conservar est√©tica
        }
      }
      // Fuegos artificiales: desactivar en modo rendimiento
      if (perfMode) stopFireworks();
      evaluateEventState(Date.now());
    }

    // Estado inicial desde almacenamiento
    try {
      const saved = localStorage.getItem('vac_perf_mode');
      if (saved === 'on') applyPerfMode(true);
    } catch(_) {}

    if (perfToggle) {
      perfToggle.addEventListener('click', () => {
        applyPerfMode(!perfMode);
      });
    }

    // Motor simple de fuegos artificiales
    const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    let fwCtx = null, fwParticles = [], fwRunning = false, fwAnimId = 0, fwLastSpawn = 0;
    function fwResize() {
      if (!fireworksCanvas) return;
      const dprCap = prefersReducedMotion ? 1.2 : 2;
      const dpr = Math.min(window.devicePixelRatio || 1, dprCap);
      fireworksCanvas.width = Math.floor(window.innerWidth * dpr);
      fireworksCanvas.height = Math.floor(window.innerHeight * dpr);
      fireworksCanvas.style.width = window.innerWidth + 'px';
      fireworksCanvas.style.height = window.innerHeight + 'px';
      if (fwCtx) fwCtx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    function spawnFirework() {
      if (!fwCtx) return;
      const W = window.innerWidth, H = window.innerHeight;
      const cx = Math.random() * W;
      const cy = (0.2 + Math.random() * 0.6) * H;
      const hue = Math.floor(Math.random() * 360);
      const count = 90 + Math.floor(Math.random() * 60);
      for (let i = 0; i < count; i++) {
        const angle = (i / count) * Math.PI * 2;
        const speed = 2 + Math.random() * 3.5;
        fwParticles.push({
          x: cx, y: cy,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          alpha: 1,
          decay: 0.012 + Math.random() * 0.025,
          color: `hsl(${hue}, 100%, ${55 + Math.random()*20}%)`
        });
      }
    }
    function fwStep(ts) {
      if (!fwCtx) return;
      if (!fwRunning) return;
      const now = ts || performance.now();
      if (now - fwLastSpawn > 550) { // nueva explosi√≥n cada ~0.55s
        spawnFirework();
        fwLastSpawn = now;
      }
      fwCtx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);
      fwCtx.globalCompositeOperation = 'lighter';
      for (let i = fwParticles.length - 1; i >= 0; i--) {
        const p = fwParticles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vx *= 0.985; // ligera fricci√≥n
        p.vy *= 0.985; // ligera fricci√≥n
        p.vy += 0.02;  // gravedad
        p.alpha -= p.decay;
        if (p.alpha <= 0 || p.y > window.innerHeight + 40) {
          fwParticles.splice(i, 1);
          continue;
        }
        fwCtx.globalAlpha = Math.max(p.alpha, 0);
        fwCtx.fillStyle = p.color;
        fwCtx.beginPath();
        fwCtx.arc(p.x, p.y, 2.2, 0, Math.PI * 2);
        fwCtx.fill();
      }
      fwAnimId = requestAnimationFrame(fwStep);
    }
    function startFireworks() {
      if (fwRunning || !fireworksCanvas || perfMode) return;
      if (prefersReducedMotion || document.visibilityState !== 'visible') return;
      fireworksCanvas.style.display = 'block';
      fwCtx = fireworksCanvas.getContext('2d');
      fwParticles = [];
      fwRunning = true;
      fwLastSpawn = performance.now();
      fwResize();
      fwAnimId = requestAnimationFrame(fwStep);
    }
    function stopFireworks() {
      if (!fwRunning) return;
      fwRunning = false;
      fwParticles = [];
      try { cancelAnimationFrame(fwAnimId); } catch(e) {}
      fwAnimId = 0;
      if (fireworksCanvas) fireworksCanvas.style.display = 'none';
    }
    window.addEventListener('resize', fwResize, { passive: true });
    document.addEventListener('visibilitychange', () => {
      if (document.visibilityState === 'hidden') {
        stopFireworks();
      } else {
        // Re-evaluar estado al volver a ser visible
        evaluateEventState(Date.now());
      }
    });

    // Banner del evento
    function showBanner(text, type) {
      if (!eventBanner) return;
      eventBanner.textContent = text;
      eventBanner.classList.remove('motivation', 'thanks');
      if (type) eventBanner.classList.add(type);
      eventBanner.hidden = false;
      eventBanner.style.display = 'block';
    }
    function hideBanner() {
      if (!eventBanner) return;
      eventBanner.hidden = true;
      eventBanner.style.display = 'none';
    }

    function evaluateEventState(nowTs) {
      const now = nowTs || Date.now();
      if (now < eventStartMs) {
        hideBanner();
        stopFireworks();
        return;
      }
      // Durante el d√≠a de competencia: mostrar mensaje motivacional y fuegos
      if (now >= eventStartMs && now < eventEndMs) {
        showBanner('¬°Arrancamos! Hoy rodamos fuerte y con respeto. ¬°√Ånimo ciclistas y afici√≥n!', 'motivation');
        if (!fwRunning) startFireworks();
        return;
      }
      // Tras 20h del fin del contador: mensaje de agradecimiento y sin fuegos
      if (now >= thanksSwitchMs) {
        showBanner('¬°Gracias por ser parte de la Vuelta al C√≥ndor! Comunidad, respeto y diversidad.', 'thanks');
        stopFireworks();
        return;
      }
      // Entre fin del d√≠a y antes del cambio a agradecimiento: mantener motivaci√≥n sin fuegos
      showBanner('Gran d√≠a de competencia. ¬°Recup√©rate y comparte tu experiencia!', 'motivation');
      stopFireworks();
    }
    const countdownValues = {
      days: document.getElementById('countdown-days'),
      hours: document.getElementById('countdown-hours'),
      minutes: document.getElementById('countdown-minutes'),
      seconds: document.getElementById('countdown-seconds')
    };

    function pad(value) {
      return String(value).padStart(2, '0');
    }

    function updateCountdown() {
      const now = Date.now();
      const distance = countdownTarget - now;
      if (distance <= 0) {
        Object.values(countdownValues).forEach(node => {
          if (node) node.textContent = '00';
        });
        // Activar estado del evento al terminar el contador
        evaluateEventState(now);
        return;
      }
      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
      const minutes = Math.floor((distance / (1000 * 60)) % 60);
      const seconds = Math.floor((distance / 1000) % 60);
      if (countdownValues.days) countdownValues.days.textContent = pad(days);
      if (countdownValues.hours) countdownValues.hours.textContent = pad(hours);
      if (countdownValues.minutes) countdownValues.minutes.textContent = pad(minutes);
      if (countdownValues.seconds) countdownValues.seconds.textContent = pad(seconds);
      // Mientras corre el contador, ocultar elementos del evento
      evaluateEventState(now);
    }

    updateCountdown();
    window.setInterval(updateCountdown, 1000);
    // Reevaluar estado cada 30 segundos para cambios de d√≠a/umbral
    window.setInterval(() => evaluateEventState(Date.now()), 30000);

    const sponsorGrid = document.querySelector('[data-sponsors-grid]');
    const sponsorSection = document.querySelector('[data-sponsors]');

    async function loadSponsors() {
      if (!sponsorGrid) return;
      try {
        const response = await fetch('data/sponsors.json', { cache: 'no-store' });
        if (!response.ok) throw new Error('No se pudo cargar el listado');
        const sponsors = await response.json();
        if (!Array.isArray(sponsors) || sponsors.length === 0) {
          sponsorGrid.innerHTML = `<p style="color: var(--vac-muted); text-align:center;">Pronto anunciaremos a los patrocinadores confirmados.</p>`;
          return;
        }
        sponsorGrid.innerHTML = '';
        sponsors.forEach(sponsor => {
          const card = document.createElement('article');
          card.className = 'sponsor-card';

          const link = document.createElement('a');
          link.href = sponsor.url || '#';
          link.target = '_blank';
          link.rel = 'noopener';
          link.setAttribute('aria-label', sponsor.cta || sponsor.name);

          const logo = document.createElement('img');
          logo.src = sponsor.logo;
          logo.alt = sponsor.name;
          logo.loading = 'lazy';
          logo.decoding = 'async';

          link.appendChild(logo);
          card.appendChild(link);

          const label = document.createElement('span');
          label.textContent = sponsor.name;
          card.appendChild(label);

          sponsorGrid.appendChild(card);
        });
      } catch (error) {
        sponsorGrid.innerHTML = `<p style='color: var(--vac-muted); text-align:center;'>No fue posible cargar los patrocinadores en este momento.</p>`;
      }
    }

    if ('IntersectionObserver' in window && sponsorSection) {
      const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            loadSponsors();
            observer.disconnect();
          }
        });
      }, { rootMargin: '0px 0px -120px 0px' });
      observer.observe(sponsorSection);
    } else {
      loadSponsors();
    }

    // Service Worker: recarga controlada cuando hay versi√≥n nueva
    if ('serviceWorker' in navigator) {
      // Manejo de mensaje de actualizaci√≥n desde el SW
      const RELOAD_KEY = '__vac_reloaded_' + (window.location.pathname || '/');
      const alreadyReloaded = sessionStorage.getItem(RELOAD_KEY) === '1';

      function handleSwMessage(event) {
        const data = event.data || {};
        if (data.type !== 'vac-update' || !data.version) return;
        const currentVersion = localStorage.getItem('vac_version');
        if (currentVersion === String(data.version)) return;
        // Persistir nueva versi√≥n y avisar visualmente
        localStorage.setItem('vac_version', String(data.version));
        const banner = document.getElementById('event-banner');
        if (banner) {
          banner.textContent = 'Actualizaci√≥n disponible. Recargando para aplicar cambios‚Ä¶';
          banner.classList.add('motivation');
          banner.hidden = false;
        }
        // Recargar una sola vez por p√°gina para evitar bucles
        if (!alreadyReloaded) {
          sessionStorage.setItem(RELOAD_KEY, '1');
          setTimeout(() => { window.location.reload(); }, 600);
        }
      }

      navigator.serviceWorker.addEventListener('message', handleSwMessage);

      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => {
            // Solicitar verificaci√≥n de versi√≥n expl√≠cita al tomar control
            if (navigator.serviceWorker.controller) {
              navigator.serviceWorker.controller.postMessage({ type: 'VAC_CHECK_VERSION' });
            }
          })
          .catch(() => {});
      });
    }
  </script>
  <script defer src="./gpu-io.min.js"></script>
  <!-- Restore console methods once everything has loaded -->
  <script>
    // Estado activo accesible en navegaci√≥n:
    // - Enlaces a otras p√°ginas: aria-current="page" cuando path coincide.
    // - Enlaces a secciones internas: NO page; usar aria-current="location" s√≥lo si su secci√≥n est√° en viewport.
    document.addEventListener('DOMContentLoaded', function(){
      var links = Array.from(document.querySelectorAll('.nav-links a'));
      function normalizePath(p){ return (p === '/' || p === '') ? '/' : p.replace(/index\.html$/, '/'); }
      var current = normalizePath(location.pathname);
      var sectionLinks = [];
      links.forEach(function(a){
        var href = a.getAttribute('href');
        try {
          var u = new URL(href, location.origin);
          var pathSame = normalizePath(u.pathname) === current;
          var hasHash = !!u.hash || (href && href.charAt(0) === '#');
          if (pathSame && hasHash) {
            // Link interno a secci√≥n: gestionar por visibilidad de la secci√≥n
            a.removeAttribute('aria-current');
            var id = (u.hash || '').slice(1) || (href && href.charAt(0)==='#' ? href.slice(1) : '');
            if (id) { a.dataset.observeTarget = id; sectionLinks.push(a); }
          } else {
            // Link a otra p√°gina
            a.setAttribute('aria-current', pathSame && !hasHash ? 'page' : null);
          }
        } catch(_){ /* noop */ }
      });

      // Observer para resaltar secci√≥n visible
      if (sectionLinks.length && 'IntersectionObserver' in window) {
        var targets = sectionLinks
          .map(function(a){ return document.getElementById(a.dataset.observeTarget); })
          .filter(function(el){ return !!el; });
        try {
          var obs = new IntersectionObserver(function(entries){
            entries.forEach(function(entry){
              var id = entry.target.id;
              var inView = entry.isIntersecting;
              sectionLinks.forEach(function(a){
                if (a.dataset.observeTarget === id) {
                  if (inView) a.setAttribute('aria-current','location');
                  else if (a.getAttribute('aria-current') === 'location') a.removeAttribute('aria-current');
                }
              });
            });
          }, { rootMargin: '-45% 0px -45% 0px', threshold: 0.15 });
          targets.forEach(function(el){ obs.observe(el); });
        } catch(_){ /* silently ignore */ }
      }
    });

    // Mostrar/ocultar bot√≥n de Feedback seg√∫n scroll
    document.addEventListener('DOMContentLoaded', function(){
      var fb = document.getElementById('feedback-floating');
      if (!fb) return;
      var showAt = 500;
      function onScroll(){ fb.style.display = (window.scrollY > showAt) ? 'inline-flex' : 'none'; }
      window.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
    });
    window.addEventListener('load', function() {
      try {
        var c = window.console || {};
        var o = window.__consoleOriginal;
        if (o) {
          c.log = o.log;
          c.info = o.info;
          c.debug = o.debug;
          c.trace = o.trace;
          c.group = o.group;
          c.groupCollapsed = o.groupCollapsed;
          c.groupEnd = o.groupEnd;
        }
        window.__consoleOriginal = null;
      } catch (e) {
        // intentionally silent
      }
    }, { once: true });
  </script>
  <script defer src="./fluid-background.js"></script>
</body>
</html>
