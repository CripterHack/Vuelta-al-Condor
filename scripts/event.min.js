!function(){function t(){if(!d)return;const t=w?1.2:2,e=Math.min(window.devicePixelRatio||1,t);d.width=Math.floor(window.innerWidth*e),d.height=Math.floor(window.innerHeight*e),u&&u.setTransform(e,0,0,e,0,0)}function e(t){if(!u||!f)return;const n=t||performance.now();n-p>550&&(function(){if(!u)return;const t=window.innerWidth,e=window.innerHeight,n=Math.random()*t,i=(.2+.6*Math.random())*e,a=Math.floor(360*Math.random()),o=90+Math.floor(60*Math.random());for(let t=0;t<o;t++){const e=t/o*Math.PI*2,r=2+3.5*Math.random();v.push({x:n,y:i,vx:Math.cos(e)*r,vy:Math.sin(e)*r,alpha:1,decay:.012+.025*Math.random(),color:`hsl(${a}, 100%, ${55+20*Math.random()}%)`})}}(),p=n),u.clearRect(0,0,d.width,d.height),u.globalCompositeOperation="lighter";for(let t=v.length-1;t>=0;t--){const e=v[t];e.x+=e.vx,e.y+=e.vy,e.vx*=.985,e.vy*=.985,e.vy+=.02,e.alpha-=e.decay,e.alpha<=0||e.y>window.innerHeight+40?v.splice(t,1):(u.globalAlpha=Math.max(e.alpha,0),u.fillStyle=e.color,u.beginPath(),u.arc(e.x,e.y,2.2,0,2*Math.PI),u.fill())}y=requestAnimationFrame(e)}function n(){!f&&d&&(w||"visible"!==document.visibilityState||(d.classList.add("is-visible"),u=d.getContext("2d"),v=[],f=!0,p=performance.now(),t(),y=requestAnimationFrame(e)))}function i(){if(f){f=!1,v=[];try{cancelAnimationFrame(y)}catch(t){}y=0,d&&d.classList.remove("is-visible")}}function a(t,e){r&&(r.textContent=t,r.classList.remove("motivation","thanks"),e&&r.classList.add(e),r.hidden=!1)}function o(t){const e=t||Date.now();return e<l?(r&&(r.hidden=!0),void i()):e>=l&&e<h?(a("¡Arrancamos! Hoy rodamos fuerte y con respeto. ¡Ánimo ciclistas y afición!","motivation"),void(f||n())):e>=m?(a("¡Gracias por ser parte de la Vuelta al Cóndor! Comunidad, respeto y diversidad.","thanks"),void i()):(a("Gran día de competencia. ¡Recupérate y comparte tu experiencia!","motivation"),void i())}const r=document.getElementById("event-banner"),d=document.getElementById("fireworks-canvas"),c=document.getElementById("countdown-target"),s=c?Number(c.getAttribute("data-target-ms")):new Date("2025-11-29T06:00:00-06:00").getTime(),l=s,h=new Date("2025-11-29T22:00:00-06:00").getTime(),m=l+72e6,w=window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;let u=null,v=[],f=!1,y=0,p=0;window.addEventListener("resize",t,{passive:!0}),document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState?i():o(Date.now())}),window.VAC=window.VAC||{},window.VAC.countdownTarget=s,window.VAC.fireworks={start:n,stop:i},window.VAC.evaluateEventState=o}();